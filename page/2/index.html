<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="保持热情:)">
<meta property="og:type" content="website">
<meta property="og:title" content="一杯西瓜汁er🍉">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="一杯西瓜汁er🍉">
<meta property="og:description" content="保持热情:)">
<meta property="article:author" content="Christy">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>一杯西瓜汁er🍉</title>
  








<meta name="generator" content="Hexo 4.2.1"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">一杯西瓜汁er🍉</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/15/ml-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/15/ml-4/" itemprop="url">【ML】了解神经网络流程之后，如何评价算法过拟合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-11-15T10:00:00+00:00">
                2020-11-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="改进算法？"><a href="#改进算法？" class="headerlink" title="改进算法？"></a>改进算法？</h2><h4 id="在测试的时候，与假设出现了很大的误差，怎么办？"><a href="#在测试的时候，与假设出现了很大的误差，怎么办？" class="headerlink" title="在测试的时候，与假设出现了很大的误差，怎么办？"></a>在测试的时候，与假设出现了很大的误差，怎么办？</h4><ul>
<li>收集更多的训练样本</li>
<li>选用更少的特征</li>
<li>选用更多的特征</li>
<li>增加多项式特征（x1^2, x2^2, x1x2等等）</li>
<li>增大λ（正则化项参数）</li>
<li>减小λ</li>
</ul>
<h4 id="机器学习诊断法："><a href="#机器学习诊断法：" class="headerlink" title="机器学习诊断法："></a>机器学习诊断法：</h4><p>诊断法，是一种测试法；通过执行这种测试，能够了解算法在哪里出了问题；要改进一种算法，什么样的尝试有意义。<br>【实现可能会花费一定的时间】</p>
<h2 id="怎样评价算法"><a href="#怎样评价算法" class="headerlink" title="怎样评价算法"></a>怎样评价算法</h2><h3 id="判断过拟合"><a href="#判断过拟合" class="headerlink" title="判断过拟合"></a>判断过拟合</h3><h4 id="方法一：画出假设函数（不采用）"><a href="#方法一：画出假设函数（不采用）" class="headerlink" title="方法一：画出假设函数（不采用）"></a>方法一：画出假设函数（不采用）</h4><p>如果特征多，画出假设函数观察几乎不太现实。。</p>
<h4 id="方法二："><a href="#方法二：" class="headerlink" title="方法二："></a>方法二：</h4><p>以10组样本为例：</p>
<p><img src="https://cdn.sparkling.land/christy/images/4CE5B2E0-F509-4126-9EB6-E520F47B771B.jpg" alt="image">￼<br>将数据集划成两部分，一部分作为训练集，一部分作为测试集。<br>一种典型的划分比例是7：3<br>如果数据集有某种规律的话，划分的时候最好采取<strong>随机</strong>选择（先打乱）；如果数据本身就是随机分布的，就可以选前70%作为训练集，后30%作为测试集。</p>
<h4 id="线性回归的测试"><a href="#线性回归的测试" class="headerlink" title="线性回归的测试"></a>线性回归的测试</h4><p><img src="https://cdn.sparkling.land/christy/images/C6064505-0E50-4FAB-A7A0-1DD7F613DF7D.jpg" alt="image">￼</p>
<h4 id="逻辑斯蒂的测试"><a href="#逻辑斯蒂的测试" class="headerlink" title="逻辑斯蒂的测试"></a>逻辑斯蒂的测试</h4><p><img src="https://cdn.sparkling.land/christy/images/CB8D9F1F-C6C1-43A4-8DFE-BA91769E2F70.jpg" alt="image">￼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/15/ml-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/15/ml-3/" itemprop="url">【ML】神经网络流程小结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-11-15T07:00:00+00:00">
                2020-11-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="选择一种网络架构"><a href="#选择一种网络架构" class="headerlink" title="选择一种网络架构"></a>选择一种网络架构</h3><p>指的是，神经元的连接方式（隐层单元的个数，输入单元数，输出单元数量）</p>
<h3 id="训练神经网络"><a href="#训练神经网络" class="headerlink" title="训练神经网络"></a>训练神经网络</h3><ol>
<li>构建一个神经网络，并随机初始化权重（很小的值，接近0）</li>
<li>前向传播</li>
<li>计算J代价函数</li>
<li>反向传播，计算偏导k</li>
<li>梯度检验</li>
<li>使用优化算法与BP算法来结合，计算偏导…</li>
</ol>
<p><img src="https://cdn.sparkling.land/christy/images/BF409FAB-780B-4A34-A26A-1055EC48AA3E.jpg" alt="image">￼</p>
<p><img src="https://cdn.sparkling.land/christy/images/C2254DF5-DBB0-4EDC-9592-90B8E08AD2DB.jpg" alt="image">￼</p>
<p><img src="https://cdn.sparkling.land/christy/images/4E6D4BC0-A5D1-4FBF-AA50-DAE0A0603614.jpg" alt="image">￼<br>反向传播算法：算出梯度下降的方向<br>梯度下降：沿着梯度下降的方向一点点下降一直到我们希望得到的点（最优的参数，局部最优点）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/15/ml-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/15/ml-6/" itemprop="url">【ML】诊断偏差与方差</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-11-15T00:00:00+00:00">
                2020-11-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在运行算法效果不佳的时候，多半是两种情况：一种是欠拟合（高偏差），一种是过拟合（高方差）。<br>弄清楚是哪种情况，便于找到解决问题的方法。</p>
<h4 id="偏差-方差"><a href="#偏差-方差" class="headerlink" title="偏差/方差"></a>偏差/方差</h4><p><img src="https://cdn.sparkling.land/christy/images/CE76FB14-1068-46E2-868D-F02224E22D6F.jpg" alt="image">￼</p>
<h4 id="训练误差-交叉验证误差"><a href="#训练误差-交叉验证误差" class="headerlink" title="训练误差/交叉验证误差"></a>训练误差/交叉验证误差</h4><p>横轴是多项式次数d<br><img src="https://cdn.sparkling.land/christy/images/760AE4B8-7C49-4787-9179-7500B1B79AC0.jpg" alt="image">￼</p>
<h4 id="诊断偏差与方差"><a href="#诊断偏差与方差" class="headerlink" title="诊断偏差与方差"></a>诊断偏差与方差</h4><p><img src="https://cdn.sparkling.land/christy/images/931F25FD-37B9-4BD8-859B-5875C03F93CC.jpg" alt="image">￼<br>高偏差：图中左边，训练误差很高，交叉验证的误差也很高，与训练误差接近；此时是欠拟合<br>高方差：图中右边，训练误差很低，交叉验证的误差远大于训练误差；此时是过拟合。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/14/ml-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/14/ml-2/" itemprop="url">【ML】随机初始化</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-11-14T16:00:00+00:00">
                2020-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在实现梯度下降或其他算法的时候，需要为θ等参数赋初值。 <strong>一种做法：赋全0</strong><br><img src="https://cdn.sparkling.land/christy/images/D4F38C6D-FDEA-4E15-B3E5-48525B8895A5.jpg" alt="image">￼</p>
<p>初始化的时候，两条蓝色的θ为0，两条红色的θ为0，两条绿色的θ为0；<br>那么a21，a22都是以相同的输入函数来计算的；<br>对于神经网络中所有的训练样本，最后总能得到<strong>a21=a22；<br>也能得到</strong>delt(a21)=delt(a22)。****<br>以蓝色为例来说，代价函数对于两条蓝色的θ的偏导也相等；更新也会相等；多少次的迭代都是相等的更新。<br>对于绿色、红色，也是一样的。<br>蓝色的两条，绿色的两条，红色的两条，始终分别是相等的。这意味着在计算相同的特征，高度冗余。</p>
<p>另一种做法：<br>随机初始化，打破对称性。<br><img src="https://cdn.sparkling.land/christy/images/2403E2CF-F43A-49FF-BA6D-B2EAF6D4FAF6.jpg" alt="image">￼</p>
<p>注意：这里的ε与梯度检验里的ε没有任何关系，只是恰好用了相同的字母。</p>
<p>训练之前，要将权重矩阵随机初始化成一个接近于0，在[-ε, ε]的值，然后进行反向传播，再进行梯度检验，最后进行梯度下降或者其他高级优化算法，来最小化代价函数J(θ)</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/14/ml-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/14/ml-1/" itemprop="url">【ML】梯度检验</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-11-14T07:00:00+00:00">
                2020-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="为什么要进行梯度检验？"><a href="#为什么要进行梯度检验？" class="headerlink" title="为什么要进行梯度检验？"></a>为什么要进行梯度检验？</h3><p>为了保证反向传播算法实现的正确性。<br><img src="https://cdn.sparkling.land/christy/images/105A04B2-83E3-4F4B-8F43-6F7F9A5FED1F.jpg" alt="image">￼</p>
<p><img src="https://cdn.sparkling.land/christy/images/A6D83E40-90AD-485C-A694-36BC3A446B5E.jpg" alt="image">￼</p>
<p>ε通常取10^-4，再小会出一些问题</p>
<p><img src="https://cdn.sparkling.land/christy/images/7D35FA77-911B-42A1-ADFD-CDC65B264363.jpg" alt="image">￼</p>
<p>检验：比较计算得到的结果，与反向传播中的导数是否相等or非常相近</p>
<h3 id="数值上的梯度检验步骤"><a href="#数值上的梯度检验步骤" class="headerlink" title="数值上的梯度检验步骤"></a>数值上的梯度检验步骤</h3><ol>
<li>反向传播计算Dvec</li>
<li>数值上的梯度检验计算gradApprox</li>
<li>比较Dvec与gradApprox，确保两者的数值相近</li>
<li>在反向传播学习（训练）之前要关掉梯度检验：因为梯度检验计算导数的开销很大，而且很慢</li>
</ol>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>在训练之前一定要关掉梯度检验，如果每次梯度下降里都进行数值上的梯度检验，会变得很慢。<br>反向传播是高性能的，梯度检验比反向传播要慢很多。<br>在数值上验证反向传播算法实现的正确之后，一定要记得在训练时候禁用梯度检验。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/14/ml/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/11/14/ml/" itemprop="url">【ML】反向传播算法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-11-14T06:00:00+00:00">
                2020-11-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>首先附上B站链接🔗</p>
</blockquote>
<p>吴恩达机器学习<br><a href="https://www.bilibili.com/video/BV164411b7dx?p=51" target="_blank" rel="noopener">https://www.bilibili.com/video/BV164411b7dx?p=51</a>￼<br>吴恩达机器学习里反向传播算法的数学推导<br><a href="https://www.bilibili.com/video/BV1GK4y1s76c" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1GK4y1s76c</a>￼</p>
<p>这里面的细节讲得也很清楚<br><a href="https://www.bilibili.com/video/BV1Y7411d7Ys?p=4" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Y7411d7Ys?p=4</a>￼</p>
<h3 id="线性模型"><a href="#线性模型" class="headerlink" title="线性模型"></a>线性模型</h3><p><img src="https://cdn.sparkling.land/christy/images/1C5948C3-A27E-4BB7-BF7F-6AFC7560E221.jpg" alt="drawing">￼</p>
<p><img src="https://cdn.sparkling.land/christy/images/47255AEE-1FE4-45EE-9006-27E3381DE6D3.jpg" alt="image">￼</p>
<p><img src="https://cdn.sparkling.land/christy/images/1D89373E-CD2C-487D-BAE0-901472FD818E.jpg" alt="drawing">￼</p>
<h3 id="为什么需要反向传播"><a href="#为什么需要反向传播" class="headerlink" title="为什么需要反向传播"></a>为什么需要反向传播</h3><p>嵌套非常多的复合函数，如果在这里写解析式的话，就会变的相当的复杂。<br>把网络看成一张图，在图上传播梯度，根据链式法则求出梯度；这种算法就叫做反向传播算法，BP</p>
<h3 id="🌰一个两层的网络"><a href="#🌰一个两层的网络" class="headerlink" title="🌰一个两层的网络"></a>🌰一个两层的网络</h3><p><img src="https://cdn.sparkling.land/christy/images/80634E14-D541-440B-9EB9-A541356D0B9122.jpg" alt="drawing">￼<br>以上，没有用激活函数，展开会发现，不管多少层，都是一个线性变换；所以要对每一层的输出，都加一个激活函数，也就是非线性单元。</p>
<p><img src="https://cdn.sparkling.land/christy/images/F2599DF3-61BC-4FCA-AE71-42DBCB5C90D5.jpg" alt="image">￼</p>
<h3 id="链式法则"><a href="#链式法则" class="headerlink" title="链式法则"></a>链式法则</h3><p><img src="https://cdn.sparkling.land/christy/images/F4D7D09C-51BE-4BFA-829F-4774EBD2170E.jpg" alt="image">￼</p>
<h3 id="链式求导"><a href="#链式求导" class="headerlink" title="链式求导"></a>链式求导</h3><p>创建计算图，前馈运算，反向传播<br><img src="https://cdn.sparkling.land/christy/images/56490478-9A4E-40D6-8375-754441DD5C8D.jpg" alt="image">￼<br><img src="https://cdn.sparkling.land/christy/images/3B6FE363-B6D2-4D7B-80D1-FD0223BBC5C8.jpg" alt="image">￼</p>
<h2 id="解释吴恩达机器学习课程中的反向传播"><a href="#解释吴恩达机器学习课程中的反向传播" class="headerlink" title="解释吴恩达机器学习课程中的反向传播"></a>解释吴恩达机器学习课程中的反向传播</h2><p><img src="https://cdn.sparkling.land/christy/images/DF02A442-83E8-4475-8C37-57F242A4F3A8.jpg" alt="image">￼</p>
<p><strong>代价函数</strong></p>
<ul>
<li>二分类：输出0或1</li>
<li>多分类：输出one-hot向量<br><img src="https://cdn.sparkling.land/christy/images/4C5CC8EF-8AF6-4BDE-87D8-822553737AA6.jpg" alt="image">￼</li>
</ul>
<p>反向传播算法里，很重要的一步是，计算这些偏导项。<br><img src="https://cdn.sparkling.land/christy/images/B24A9AD6-BEB4-4957-BB2C-7C200134B020.jpg" alt="image">￼<br><img src="https://cdn.sparkling.land/christy/images/CA88173B-AFA9-4B27-BDEF-C89E1C24644E.jpg" alt="image">￼<br>这里的δ更准确的说是，J对θ的偏导数。</p>
<p>对于这里面如何推导出来的，建议看最前面附上的第二个视频链接，讲得很清楚。</p>
<p><img src="https://cdn.sparkling.land/christy/images/1F78B3A3-8A9B-4659-9BBD-97A65C2FBDBD.jpg" alt="image">￼<br><img src="https://cdn.sparkling.land/christy/images/430BC1AC-9FA0-476F-90B3-A5D0F5B05F05.jpg" alt="image">￼</p>
<h2 id="理解反向传播在神经网络训练过程中的作用"><a href="#理解反向传播在神经网络训练过程中的作用" class="headerlink" title="理解反向传播在神经网络训练过程中的作用"></a>理解反向传播在神经网络训练过程中的作用</h2><p>正向传播，计算代价函数；</p>
<p>在一次反向传播之后，计算出所有待更新参数的梯度之后，进行更新（对于任意参数ω ，更新参数的公式都是ω = ω + Δω）<br>然后再正向传播，计算代价函数；再反向传播计算梯度，更新……；一直到结束（一般是参数基本不再更新，loss不再下降等）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/10/24/%E3%80%90%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95%E3%80%91mapper%E6%89%BE%E4%B8%8D%E5%88%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/10/24/%E3%80%90%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95%E3%80%91mapper%E6%89%BE%E4%B8%8D%E5%88%B0/" itemprop="url">【问题】A component required a bean of type 'com.cs.actionmall.mapper.UserMapper' that could not be found.</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-10-24T15:20:00+00:00">
                2020-10-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>记录专业实践使用SpringBoot后端开发遇到的问题</p>
</blockquote>
<p>报错显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Description:</span><br><span class="line"></span><br><span class="line">A component required a bean of type &#39;com.cs.actionmall.mapper.UserMapper&#39; that could not be found.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Consider defining a bean of type &#39;com.cs.actionmall.mapper.UserMapper&#39; in your configuration.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Process finished with exit code 1</span><br></pre></td></tr></table></figure>



<p>首先检查，@Mapper注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserMapper</span> </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>考虑缺少依赖，发现pom.xml文件中没有写如下部分</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>用的是mybatis不是mybatisplus，要用mybatis的依赖而不是mybatisplus的依赖</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/22/05Amazon%E4%BA%91%E8%AE%A1%E7%AE%97AWS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/22/05Amazon%E4%BA%91%E8%AE%A1%E7%AE%97AWS/" itemprop="url">05Amazon云计算AWS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-22T16:00:00+00:00">
                2020-08-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>为专业课复习用</p>
</blockquote>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>Amazon Web Service（AWS）</p>
<h3 id="Amazon云的提出"><a href="#Amazon云的提出" class="headerlink" title="Amazon云的提出"></a>Amazon云的提出</h3><p>IaaS：将硬件设备等基础资源封装成服务供用户使用</p>
<h3 id="Amazon提供的服务主要包括"><a href="#Amazon提供的服务主要包括" class="headerlink" title="Amazon提供的服务主要包括"></a>Amazon提供的服务主要包括</h3><ul>
<li>弹性计算云EC2</li>
<li>简单存储服务S3</li>
<li>简单数据库服务Simple DB</li>
<li>简单队列服务SQS</li>
<li>弹性MapReduce服务</li>
<li>内容推送服务CloudFront</li>
<li>电子商务服务DevPay</li>
<li>灵活支付服务FPS</li>
</ul>
<h2 id="🌿基础存储架构Dynamo"><a href="#🌿基础存储架构Dynamo" class="headerlink" title="🌿基础存储架构Dynamo"></a>🌿基础存储架构Dynamo</h2><p>🌿Amazon平台基础存储架构：Dynamo </p>
<p>Amazon平台的架构是完全的<strong>分布式、去中心化</strong> </p>
<p><strong>需求</strong>——Amazon平台中有很多服务对存储的需求只是读取、写入，（满足简单的键/值式存储）</p>
<h3 id="🌿Dynamo"><a href="#🌿Dynamo" class="headerlink" title="🌿Dynamo"></a>🌿Dynamo</h3><ul>
<li>简单的键/值方式存储数据，不支持复杂的查询</li>
<li>存储的是数据值的原始形式（bit），不解析数据的具体内容、不识别任何数据结构，这使得它几乎可以处理所有的数据类型</li>
</ul>
<h3 id="🌿Dynamo需要解决的主要问题及解决方案"><a href="#🌿Dynamo需要解决的主要问题及解决方案" class="headerlink" title="🌿Dynamo需要解决的主要问题及解决方案"></a>🌿Dynamo需要解决的主要问题及解决方案</h3><table>
<thead>
<tr>
<th>问题</th>
<th>采取的相关技术</th>
</tr>
</thead>
<tbody><tr>
<td>数据均衡分布</td>
<td>改进的一致性哈希算法</td>
</tr>
<tr>
<td>数据备份</td>
<td>参数可调的quorum机制</td>
</tr>
<tr>
<td>数据冲突处理</td>
<td>向量时钟Vector Clock</td>
</tr>
<tr>
<td>成员资格及错误检测</td>
<td>基于Gossip协议的成员资格和错误检测</td>
</tr>
<tr>
<td>临时故障处理</td>
<td>Hinted handoff（数据回传机制）</td>
</tr>
<tr>
<td>永久故障处理</td>
<td>Merkle哈希树</td>
</tr>
</tbody></table>
<h3 id="Dynamo的存储节点"><a href="#Dynamo的存储节点" class="headerlink" title="Dynamo的存储节点"></a>Dynamo的存储节点</h3><p>Dynamo中的存储节点呈<u>无中心的环状</u>分布。</p>
<p><img src="https://cdn.sparkling.land/christy/images/Dynamo%E5%AD%98%E5%82%A8%E6%9E%B6%E6%9E%84.png" alt="Dynamo存储架构"></p>
<h4 id="两个基本概念"><a href="#两个基本概念" class="headerlink" title="两个基本概念"></a>两个基本概念</h4><ol>
<li><p>preference list</p>
<p>存储与某个特定键值相对应的数据的节点列表</p>
</li>
<li><p>coordinator</p>
<p>执行一次读或写操作的节点</p>
</li>
</ol>
<blockquote>
<p>通常，coordinator 是 preference list 上的第一个节点</p>
</blockquote>
<h2 id="Dynamo架构的主要技术"><a href="#Dynamo架构的主要技术" class="headerlink" title="Dynamo架构的主要技术"></a>Dynamo架构的主要技术</h2><h3 id="数据均衡分布的问题"><a href="#数据均衡分布的问题" class="headerlink" title="数据均衡分布的问题"></a>数据均衡分布的问题</h3><p>Dynamo采用了<u>分布式的数据存储架构</u>，均衡的数据分布可以保证负载平衡和系统良好的扩展性。</p>
<p>因此，<u>各个节点上数据的均衡性</u>是影响Dynamo性能的关键问题。</p>
<blockquote>
<p>取模分配方式：如果增加一台主机，会有大量的数据进行迁移</p>
</blockquote>
<h4 id="🌿🌿🌿一致性哈希算法"><a href="#🌿🌿🌿一致性哈希算法" class="headerlink" title="🌿🌿🌿一致性哈希算法"></a>🌿🌿🌿一致性哈希算法</h4><p>一致性哈希算法是目前主流的<strong>分布式哈希表</strong>（Distributed Hash Table，DHT）协议之一 </p>
<p>一致性哈希算法除了能够保证哈希运算结果充分分散到整个环上外，还能保证在添加或删除设备节点时只会影响到其在哈希环中的前驱设备节点，而不会对其他设备节点产生影响。</p>
<p><img src="https://cdn.sparkling.land/christy/images/dynamo%E4%B8%80%E8%87%B4%E6%80%A7hash.png" alt="dynamo一致性hash"></p>
<p>一致性哈希算法可以<strong>大大降低</strong>在添加或删除节点时引起的<strong>节点间的数据传输开销</strong></p>
<h4 id="改进的一致性哈希算法"><a href="#改进的一致性哈希算法" class="headerlink" title="改进的一致性哈希算法"></a>改进的一致性哈希算法</h4><p>Dynamo中引入了<strong>虚拟节点</strong>的概念</p>
<p>每个虚拟节点都<strong>隶属于</strong>某一个实际的<strong>物理节点</strong>，一个物理节点根据其性能的差异被分为<strong>一个或多个虚拟节点</strong>。</p>
<p>各个虚拟节点的<strong>能力基本相当</strong>，并随机分布在<strong>哈希环</strong>上。</p>
<p><img src="https://cdn.sparkling.land/christy/images/dynamo%E8%99%9A%E6%8B%9F%E8%8A%82%E7%82%B9.png" alt="dynamo虚拟节点"></p>
<p>Dynamo将整个哈希环划分成Q等份，每个等份称为一个数据分区（Partition）</p>
<p>在存储数据时，每个数据会被先分配到某个数据分区，再根据负责该数据分区的虚拟节点，最终确定其所存储的物理节点。</p>
<p><img src="https://cdn.sparkling.land/christy/images/dynamo%E6%95%B0%E6%8D%AE%E5%88%86%E5%8C%BA.png" alt="dynamo数据分区"></p>
<h5 id="数据分区的好处"><a href="#数据分区的好处" class="headerlink" title="数据分区的好处"></a>数据分区的好处</h5><ol>
<li>减小数据分布不均衡的可能性</li>
<li>添加或删除设备节点时引起较小的数据传输</li>
</ol>
<h5 id="改进的一致性哈希算法的优势"><a href="#改进的一致性哈希算法的优势" class="headerlink" title="改进的一致性哈希算法的优势"></a>改进的一致性哈希算法的优势</h5><ul>
<li>负载均衡</li>
<li>屏蔽节点处理能力差异</li>
</ul>
<h3 id="数据备份"><a href="#数据备份" class="headerlink" title="数据备份"></a>数据备份</h3><blockquote>
<p>可以参照上面的数据分区的图来看</p>
</blockquote>
<ul>
<li>在Dynamo中，每个数据的副本备份存储在哈希环顺时针方向上该数据所在虚拟节点的后继节点中。</li>
<li>数据备份在存储数据的同时进行，会使每次写操作的延时变长。</li>
<li>Dynamo中对写操作进行了优化，保证一个副本必须写入硬盘，其他副本只要写入节点的内存即返回写成功。</li>
<li>每个虚拟节点上实际存储了分配给它以及分配它的前N-1个前驱虚拟节点的数据。</li>
</ul>
<h4 id="参数可调的弱quorum机制"><a href="#参数可调的弱quorum机制" class="headerlink" title="参数可调的弱quorum机制"></a>参数可调的弱quorum机制</h4><p>读写参数W、R、N</p>
<p> N：系统中每条记录的副本数</p>
<p> W：每次记录成功写操作需要写入的副本数</p>
<p> R：每次记录读请求最少需要读取的副本数。</p>
<p>满足R+W&gt;N，用户即可自行配置R和W</p>
<h3 id="数据冲突问题"><a href="#数据冲突问题" class="headerlink" title="数据冲突问题"></a>数据冲突问题</h3><h4 id="分布式系统架构中通常考虑的三个因素"><a href="#分布式系统架构中通常考虑的三个因素" class="headerlink" title="分布式系统架构中通常考虑的三个因素"></a>分布式系统架构中通常考虑的三个因素</h4><ol>
<li>可靠性 Reliability</li>
<li>可用性 Availability</li>
<li>一致性 Consistency</li>
</ol>
<h4 id="Why数据冲突？"><a href="#Why数据冲突？" class="headerlink" title="Why数据冲突？"></a>Why数据冲突？</h4><ul>
<li>Dynamo选择通过牺牲一致性来保证系统的可靠性和可用性，没有采用强一致性模型而采用了最终一致性模型。</li>
<li>由于Dynamo中可能出现同一个数据被<strong>多个节点同时更新</strong>的情况，且<strong>无法保证数据副本的更新顺序</strong>，这有可能会导致数据冲突。</li>
</ul>
<h4 id="How解决数据冲突？"><a href="#How解决数据冲突？" class="headerlink" title="How解决数据冲突？"></a>How解决数据冲突？</h4><p>采用<strong>向量时钟技术</strong>。</p>
<p><img src="https://cdn.sparkling.land/christy/images/dynamo%E5%90%91%E9%87%8F%E6%97%B6%E9%92%9F%E6%8A%80%E6%9C%AF.png" alt="dynamo向量时钟技术"></p>
<p>Dynamo中的向量时钟通过<code>[node, counter]</code> 对 来表示。</p>
<blockquote>
<p>node表示操作节点<br>counter是其对应的计数器，初始值为 0节点每进行一次更新操作则计数器加 1</p>
</blockquote>
<h3 id="成员资格及错误检测"><a href="#成员资格及错误检测" class="headerlink" title="成员资格及错误检测"></a>成员资格及错误检测</h3><p>由于Dynamo采用了无中心的架构，每个成员节点都需要保存其他节点的路由信息。</p>
<p>为了保证每个节点都能拥有最新的成员节点信息，Dynamo中采用了一种类似于<strong>Gossip（闲聊）协议</strong>的技术</p>
<blockquote>
<p>Dynamo中还通过Gossip来实现错误检测。任何节点向其他节点发起通信后，如果对方没有回应，则认为对方节点失效</p>
</blockquote>
<p>为了避免新加入的节点之间不能及时发现其他节点的存在，Dynamo中设置了一些<strong>种子节点</strong>（Seed Node）。<strong>种子节点和所有的节点都有联系</strong>。当新节点加入时，它扮演一个中介的角色，使新加入节点之间互相感知。</p>
<p><img src="https://cdn.sparkling.land/christy/images/dynamo%E6%88%90%E5%91%98%E8%B5%84%E6%A0%BC%E5%8F%8A%E9%94%99%E8%AF%AF%E6%A3%80%E6%B5%8B.png" alt="成员资格及错误检测 "></p>
<ul>
<li>自底向上每一层代表一次随机通信</li>
<li>第一层节点1将信息交换给节点2</li>
<li>第二层节点1和2同时开始随机选择其他节点交换信息</li>
<li>直到N个节点全部传遍</li>
</ul>
<h3 id="容错机制——临时故障处理机制"><a href="#容错机制——临时故障处理机制" class="headerlink" title="容错机制——临时故障处理机制"></a>容错机制——临时故障处理机制</h3><p>为了处理临时失效的节点，Dynamo中采用了一种带有监听的数据回传机制（Hinted Handoff）<br>当虚拟节点A失效后，会将数据临时存放在节点D的临时空间中，并在节点A重新可用后，由节点D将数据回传给节点A。</p>
<p><img src="https://cdn.sparkling.land/christy/images/Dynamo%E4%B8%B4%E6%97%B6%E6%95%85%E9%9A%9C%E5%A4%84%E7%90%86%E6%9C%BA%E5%88%B6.png" alt="Dynamo临时故障处理机制"></p>
<h3 id="容错机制——永久性故障处理机制"><a href="#容错机制——永久性故障处理机制" class="headerlink" title="容错机制——永久性故障处理机制"></a>容错机制——永久性故障处理机制</h3><p>Dynamo采用Merkle哈希树技术来加快检测和减少数据传输量</p>
<p><img src="https://cdn.sparkling.land/christy/images/dynamo-merkle-tree.png" alt="dynamo-merkle-tree"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/19/04Google%E4%BA%91%E8%AE%A1%E7%AE%97%E6%8A%80%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/19/04Google%E4%BA%91%E8%AE%A1%E7%AE%97%E6%8A%80%E6%9C%AF/" itemprop="url">04Google云计算技术</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-19T18:00:00+00:00">
                2020-08-19
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>为专业课复习用</p>
</blockquote>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><h4 id="GFS"><a href="#GFS" class="headerlink" title="GFS"></a>GFS</h4><ol>
<li>Google File System</li>
<li>支持海量存储</li>
</ol>
<h4 id="MapReduce"><a href="#MapReduce" class="headerlink" title="MapReduce"></a>MapReduce</h4><ol>
<li>用于大规模数据集的并行运算。</li>
<li>主要功能：是提供了一个简单强大的接口，可以将计算自动的并发和分布执行。</li>
<li>从两方面提升了系统：<ul>
<li>失效的计算机问题。</li>
<li>MapReduce之间传输的数据都是经过压缩的，节省了带宽</li>
</ul>
</li>
</ol>
<h4 id="BigTable"><a href="#BigTable" class="headerlink" title="BigTable"></a>BigTable</h4><p>用来管理大规模<strong>结构化</strong>数据的分布式存储系统</p>
<h2 id="Google文件系统GFS"><a href="#Google文件系统GFS" class="headerlink" title="Google文件系统GFS"></a>Google文件系统GFS</h2><h3 id="系统架构"><a href="#系统架构" class="headerlink" title="系统架构"></a>系统架构</h3><ul>
<li>Google GFS是一个基于分布式集群的大型分布式文件系统，为MapReduce计算框架提供低层数据存储和数据可靠性支撑</li>
<li>GFS是一个构建在分布节点本地文件系统之上的一个<strong>逻辑文件系统</strong>，它将数据存储在物理上分布的每个节点上，但通过GFS将整个数据形成一个逻辑上整体的文件。</li>
</ul>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200316230647221.png" alt></p>
<h4 id="GFS的3个假设"><a href="#GFS的3个假设" class="headerlink" title="GFS的3个假设"></a>GFS的3个假设</h4><ol>
<li>硬件出错是正常而非异常<ul>
<li>大量廉价、易损的硬件</li>
<li>必须保持文件系统整体的可靠性</li>
</ul>
</li>
<li>主要负载是流数据读写<ul>
<li>主要用于程序处理批量数据，而非用户的交互或随机读写</li>
<li>主要是追加写（插入写非常少）</li>
</ul>
</li>
<li>需要存储大尺寸的文件<ul>
<li>GB或TB量级</li>
</ul>
</li>
</ol>
<h4 id="GFS的设计思想🌿🌿"><a href="#GFS的设计思想🌿🌿" class="headerlink" title="GFS的设计思想🌿🌿"></a>GFS的设计思想🌿🌿</h4><ol>
<li>将文件划分为若干块（Chunk）存储<ul>
<li>固定大小64M</li>
</ul>
</li>
<li>通过冗余来提高可靠性<ul>
<li>3个数据块服务器上存储副本</li>
</ul>
</li>
<li>通过单个master来协调数据访问、元数据存储<ul>
<li>结构简单，容易保持元数据一致性</li>
</ul>
</li>
</ol>
<h4 id="系统架构-1"><a href="#系统架构-1" class="headerlink" title="系统架构"></a><strong>系统架构</strong></h4><p><img src="https://cdn.sparkling.land/christy/images/GFS%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84.png" alt></p>
<blockquote>
<p>⚠️Client与Master之间只有控制信息，无数据信息，减少主服务器的负载。</p>
</blockquote>
<h4 id="系统节点分为三类角色🌿🌿🌿"><a href="#系统节点分为三类角色🌿🌿🌿" class="headerlink" title="系统节点分为三类角色🌿🌿🌿"></a>系统节点分为三类角色🌿🌿🌿</h4><p>Client 客户端</p>
<ul>
<li>提供给App的访问接口</li>
<li>以库文件的形式提供</li>
</ul>
<p>Master 主服务器</p>
<ul>
<li>GFS的管理节点</li>
<li>负责整个文件系统的管理</li>
<li>🐰逻辑上只有一个</li>
</ul>
<p>Chunk Server 数据块服务器</p>
<ul>
<li>负责具体的存储工作</li>
<li>🐰创建冗余，避免服务器崩溃</li>
</ul>
<h4 id="GFS的实现机制"><a href="#GFS的实现机制" class="headerlink" title="GFS的实现机制"></a>GFS的实现机制</h4><ol>
<li>客户端首先访问Master节点，获取交互的Chunk Server信息，然后访问这些Chunk Server，完成数据存取工作。这种设计方法实现了<strong>控制流和数据流</strong>的分离。</li>
<li><strong>Client与Master之间只有控制流，而无数据流</strong>，极大地降低了Master的负载。</li>
<li><strong>Client与Chunk Server之间直接传输数据流🌿</strong>，同时由于文件被分成多个Chunk进行分布式存储，Client可以同时访问多个Chunk Server，从而<strong>使得整个系统的I/O高度并行，系统整体性能得到提高</strong>。</li>
</ol>
<h4 id="GFS的读操作-数据访问的过程-🌿"><a href="#GFS的读操作-数据访问的过程-🌿" class="headerlink" title="GFS的读操作/数据访问的过程 🌿"></a>GFS的读操作/数据访问的过程 🌿</h4><blockquote>
<p>可以通过系统架构图来理解</p>
</blockquote>
<ol>
<li>在程序运行前，数据已经存储在GFS文件系统中；程序执行时，App告诉Master<strong>文件名或数据块索引</strong>是什么</li>
<li>Master根据<strong>文件名</strong>或数据块索引在其文件目录空间中<strong>查找和定位</strong>该文件或数据块，并找到数据块在具体哪些<strong>Chunk Server</strong>上；将<strong>位置信息</strong>返回给App</li>
<li>App根据返回的<strong>具体Chunk数据块位置信息</strong>，直接访问相应的CS</li>
<li>App根据返回的<strong>具体Chunk数据块位置信息</strong>，直接读取指定位置的数据进行计算处理</li>
</ol>
<h4 id="GFS的特点🌿"><a href="#GFS的特点🌿" class="headerlink" title="GFS的特点🌿"></a>GFS的特点🌿</h4><ol>
<li>采用<strong>中心服务器</strong>模式<ul>
<li>可以方便地增加Chunk Server</li>
<li>Master掌握系统内所有Chunk Server的情况，方便进行负载均衡</li>
<li>不存在元数据的一致性问题</li>
</ul>
</li>
<li><strong>不缓存数据</strong><ul>
<li>文件操作大部分是流式读写，不存在大量重复读写，使用Cache对性能提高不大</li>
<li>Chunk Server上数据存取使用本地文件系统</li>
<li>从可行性看，Cache与实际数据的一致性维护也极其复杂</li>
</ul>
</li>
<li><strong>在用户态下实现</strong><ul>
<li>用户态下有多种调试工具,利于开发</li>
<li>Master和Chunk Server都以进程方式运行，单个进程不影响整个操作系统</li>
<li>GFS和操作系统运行在不同的空间，两者耦合性降低</li>
</ul>
</li>
</ol>
<h3 id="容错机制"><a href="#容错机制" class="headerlink" title="容错机制"></a>容错机制</h3><h4 id="Master容错🌿🌿🌿"><a href="#Master容错🌿🌿🌿" class="headerlink" title="Master容错🌿🌿🌿"></a>Master容错🌿🌿🌿</h4><h5 id="三类元数据"><a href="#三类元数据" class="headerlink" title="三类元数据"></a>三类元数据</h5><ol>
<li>命名空间，即整个文件系统的目录结构 — <strong>日志</strong></li>
<li>Chunk与文件名的映射表 — <strong>日志</strong></li>
<li>Chunk副本的位置信息<ul>
<li>一个Chunk默认有3个<strong>副本</strong></li>
<li>直接保存在各个Chunk Server上</li>
</ul>
</li>
</ol>
<h5 id="Master故障"><a href="#Master故障" class="headerlink" title="Master故障"></a>Master故障</h5><p>当Master发生故障时，在磁盘数据保存完好的情况下，可以迅速恢复以上元数据</p>
<p>为了防止Master彻底死机的情况，GFS还提供了Master远程的实时备份</p>
<h4 id="Chunk-Server容错"><a href="#Chunk-Server容错" class="headerlink" title="Chunk Server容错"></a>Chunk Server容错</h4><ol>
<li><p>GFS采用<strong>副本</strong>的方式实现Chunk Server的容错</p>
</li>
<li><p>每一个Chunk有多个存储副本（默认为三个）</p>
</li>
<li><p>对于每一个Chunk，<strong>必须将所有的副本全部写入成功</strong>，才视为成功写入</p>
</li>
<li><p>相关的副本出现丢失或不可恢复等情况，Master自动将该副本<strong>复制</strong>到其他Chunk Server</p>
</li>
<li><p>GFS中的每一个文件被划分成多个Chunk，Chunk的默认大小是<strong>64MB</strong></p>
<h3 id="系统管理技术"><a href="#系统管理技术" class="headerlink" title="系统管理技术"></a><strong>系统管理技术</strong></h3><ul>
<li>大规模集群安装技术<ul>
<li>GFS集群中通常有<strong>非常多的节点</strong>，需要相应的技术支撑</li>
</ul>
</li>
<li>故障检测技术<ul>
<li>GFS构建在<strong>不可靠廉价计算机</strong>之上的文件系统，由于节点数目众多，故障发生十分频繁</li>
</ul>
</li>
<li>节点动态加入技术<ul>
<li>新的Chunk Server加入，只需裸机加入，大大减少GFS维护工作量</li>
</ul>
</li>
<li>节能技术<ul>
<li>Google采用了多种机制降低服务器能耗，如采用蓄电池代替昂贵的UPS</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="分布式数据处理MapReduce"><a href="#分布式数据处理MapReduce" class="headerlink" title="分布式数据处理MapReduce"></a>分布式数据处理MapReduce</h2><h3 id="产生背景"><a href="#产生背景" class="headerlink" title="产生背景"></a>产生背景</h3><ul>
<li>Google拥有<strong>海量数据</strong>，并且需要<strong>快速处理</strong>。</li>
<li>大数据<strong>分而治之</strong><ul>
<li>任务划分</li>
<li>结果合并</li>
</ul>
</li>
</ul>
<h4 id="MapReduce-1"><a href="#MapReduce-1" class="headerlink" title="MapReduce"></a>MapReduce</h4><ul>
<li>一个软件架构，一种处理海量数据的<strong>并行编程模式</strong>。</li>
<li>与传统的分布式程序设计相比，MapReduce封装了<strong>并行处理、容错处理、本地化计算、负载均衡</strong>等细节，还提供了一个<strong>简单而强大的接口</strong>。</li>
<li>MapReduce把对数据集的大规模操作，<strong>分发给一个主节点管理下的各分节点</strong>共同完成，通过这种方式<strong>实现任务的可靠执行与容错机制</strong>。</li>
</ul>
<h3 id="编程模型"><a href="#编程模型" class="headerlink" title="编程模型"></a>编程模型</h3><h4 id="Map函数"><a href="#Map函数" class="headerlink" title="Map函数"></a><strong>Map函数</strong></h4><p>对一部分原始数据进行指定的操作。每个Map操作都针对不同的原始数据，因此Map与Map之间是互相独立的，这使得它们可以充分并行化。</p>
<h4 id="Reduce操作"><a href="#Reduce操作" class="headerlink" title="Reduce操作"></a><strong>Reduce操作</strong></h4><p>对每个Map所产生的一部分中间结果进行合并操作，每个Reduce所处理的Map中间结果是互不交叉的，所有Reduce产生的最终结果经过简单连接就形成了完整的结果集.</p>
<h4 id="编程模型-1"><a href="#编程模型-1" class="headerlink" title="编程模型"></a>编程模型</h4><p>两个主要的函数🌿🌿🌿</p>
<pre><code>Map: (in_key, in_value) -&gt; {(keyj, valuej) | j = 1…k}
Reduce: (key, [value1,…,valuem]) -&gt; (key, final_value) </code></pre><h5 id="Map"><a href="#Map" class="headerlink" title="Map"></a><strong>Map</strong></h5><ul>
<li>输入参数：<code>in_key, in_value</code>，指明了Map需要处理的原始数据</li>
<li>输出结果：一组<code>k-v</code>对，中间结果</li>
</ul>
<h5 id="Reduce"><a href="#Reduce" class="headerlink" title="Reduce"></a>Reduce</h5><ul>
<li>输入参数：<code>key, [value1,…,valuem]</code></li>
<li>工作：<strong>对这些对应相同key的value值进行归并处理</strong></li>
<li>输出结果：<code>（key, final_value）</code>，所有Reduce的结果并在一起就是最终结果</li>
</ul>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200820001628281.png" alt></p>
<h3 id="实现机制"><a href="#实现机制" class="headerlink" title="实现机制"></a>实现机制</h3><p><img src="https://cdn.sparkling.land/christy/images/image-20200317001312687.png" alt></p>
<h4 id="Google-MapReduce并行处理的基本过程"><a href="#Google-MapReduce并行处理的基本过程" class="headerlink" title="Google MapReduce并行处理的基本过程"></a><strong>Google MapReduce并行处理的基本过程</strong></h4><ol>
<li>有一个待处理的大数据，被划分为<strong>大小相同的数据块</strong>(如64MB),及与此相应的用户作业程序</li>
<li>系统中有一个负责调度的<strong>主节点</strong>(Master),以及数据Map和Reduce<strong>工作节点</strong>(Worker)</li>
<li>用户作业程序提交给主节点</li>
<li><strong>主节点</strong>为作业程序寻找和配备可用的<strong>Map节点</strong>，并将程序传送给map节点</li>
<li>主节点也为作业程序寻找和配备可用的<strong>Reduce节点</strong>，并将程序传送给Reduce节点</li>
<li>主节点启动每个Map节点执行程序，每个map节点尽可能读取数据进行计算</li>
<li>每个Map节点处理读取的数据块,并做一些数据整理工作(combining, sorting等)并将中间结果存放在本地；<strong>同时通知主节点计算任务完成并告知中间结果数据存储位置</strong></li>
<li>主节点等所有Map节点计算完成后，开始启动Reduce节点运行；Reduce节点从主节点所掌握的中间结果数据位置信息，<strong>远程读取</strong>这些数据</li>
<li>Reduce节点计算结果汇总输出到一个结果文件即获得整个处理结果</li>
</ol>
<h4 id="容错机制🌿"><a href="#容错机制🌿" class="headerlink" title="容错机制🌿"></a>容错机制🌿</h4><p>MapReduce通过<strong>重新执行失效的地方</strong>来实现容错。</p>
<h5 id="Master失效"><a href="#Master失效" class="headerlink" title="Master失效"></a><strong>Master失效</strong></h5><p>Master会周期性地设置检查点（checkpoint），并导出Master的数据。一旦某个任务失效，系统就从最近的一个检查点恢复并重新执行。</p>
<p>由于只有一个Master在运行，如果Master失效了，则只能终止整个MapReduce程序的运行并重新开始。</p>
<h5 id="Worker失效"><a href="#Worker失效" class="headerlink" title="Worker失效"></a><strong>Worker失效</strong></h5><p>Master会<strong>周期性地给Worker发送ping命令</strong>，如果没有Worker的应答，则Master认为Worker失效，终止对这个Worker的任务调度，把失效Worker的任务调度到其他Worker上重新执行。</p>
<h3 id="案例分析"><a href="#案例分析" class="headerlink" title="案例分析"></a>案例分析</h3><h4 id="案例一—-单词排序"><a href="#案例一—-单词排序" class="headerlink" title="案例一—-单词排序"></a>案例一—-单词排序</h4><p>怎样通过MapReduce完成排序工作，使其有序（字典序）呢？</p>
<p><strong>步骤</strong></p>
<ol>
<li><p>对原始的数据进行分割（Split），得到N个不同的数据分块 。</p>
</li>
<li><p>对每一个数据分块都启动一个Map进行处理。</p>
<p>采用<strong>桶排序</strong>的方法，每个Map中按照首字母将字符串分配到26个不同的桶中。</p>
</li>
<li><p>对于Map之后得到的中间结果，启动26个Reduce。</p>
<p>按照首字母将Map中不同桶中的字符串集合放置到相应的Reduce中进行处理。</p>
</li>
</ol>
<h4 id="案例二—-单词计数"><a href="#案例二—-单词计数" class="headerlink" title="案例二—-单词计数"></a>案例二—-单词计数</h4><p>给定一个巨大的文本（如1TB），如何计算单词出现的数目？</p>
<p><strong>步骤</strong></p>
<p>定义Map和Reduce函数</p>
<pre><code>Map(K, V){    
    For each word w in V       
        Collect(w, 1);
}

Reduce(K, V[]){
    int count = 0;
    For each v in V
        count += v    
    Collect(K, count);
}</code></pre><ol>
<li>自动对文本进行分割</li>
<li>在分割之后的每一对&lt;key,value&gt;使用用户定义的Map进行处理，再生成新的&lt;key,value&gt;对</li>
<li>对输出的结果集归拢、排序(系统自动完成）</li>
<li>通过Reduce操作生成最后结果</li>
</ol>
<h2 id="分布式结构化数据表Bigtable"><a href="#分布式结构化数据表Bigtable" class="headerlink" title="分布式结构化数据表Bigtable"></a>分布式结构化数据表Bigtable</h2><h3 id="设计动机与目标"><a href="#设计动机与目标" class="headerlink" title="设计动机与目标"></a>设计动机与目标</h3><h4 id="设计动机"><a href="#设计动机" class="headerlink" title="设计动机"></a>设计动机</h4><ol>
<li>需要存储的数据种类繁多</li>
<li>海量的服务请求</li>
<li>商用数据库无法满足需求</li>
</ol>
<h4 id="基本目标"><a href="#基本目标" class="headerlink" title="基本目标"></a>基本目标</h4><ul>
<li>广泛的适用性 —— 为了满足一系列Google产品而并非特定产品的存储要求</li>
<li>很强的可扩展性 —— 随时可以加入或撤销服务器</li>
<li>高可用性 —— 确保几乎所有的情况下系统都可用</li>
<li>简单性 —— 底层系统的简单性既可以减少系统出错的概率，也为上层应用的开发带来便利</li>
</ul>
<h3 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h3><h4 id="Bigtable数据的存储格式"><a href="#Bigtable数据的存储格式" class="headerlink" title="Bigtable数据的存储格式"></a>Bigtable数据的存储格式</h4><p>Bigtable是一个<strong>分布式多维映射表</strong>，表中的数据通过一个<strong>行关键字（Row Key）、一个列关键字（Column Key）以及一个时间戳（Time Stamp）进行索引</strong>🌿🌿🌿🌿🌿</p>
<blockquote>
<p>🐰Bigtable可以看成<code>key-value</code>的形式，其中的<code>key</code>是行关键字+列关键字+时间戳</p>
</blockquote>
<p><strong>Bigtable的存储逻辑</strong>可以表示为：</p>
<p><code>(row:string, column:string, time:int64)→string</code></p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200820003357053.png" alt></p>
<ul>
<li>行(Row)<ul>
<li>大小不超过64KB的任意字符串。表中的数据都是根据行关键字进行排序的。</li>
<li>com.cnn.www就是一个行关键字，指明一行存储数据。URL地址倒排可以使同一地址域的网页将被存储在表中连续的位置,便于查找</li>
<li>🐰倒排？ 域名层次划分</li>
</ul>
</li>
<li>子表(Tablet)<ul>
<li>一个大表可能太大，不利于存储管理，<strong>将在水平方向上被分为多个子表</strong></li>
</ul>
</li>
</ul>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200820003727037.png" alt></p>
<ul>
<li>列(Column)<ul>
<li>特定含义的数据的集合。</li>
<li><strong>BigTable将列关键字组织成为“列族”(column family),每个族中的数据属于同一类别,</strong>如anchor是一个列族，其下可有不同的表示一个个超链接的列关键字。</li>
<li>一个列族下的数据会被压缩在一起存放。</li>
<li>一个<strong>列关键字可表示为: 族名：限定词(family:qualifier)</strong></li>
<li>content、anchor都是族名；而cnnsi.com和my.look.ca则是anchor族中的限定词。</li>
</ul>
</li>
<li>时间戳(time stamp)<ul>
<li>很多时候同一个URL的网页会不断更新，而Google需要保存不同时间的网页数据，因此需要使用时间戳来加以区分。</li>
<li>🐰时间戳 <code>int64</code>，两种生成方式：<ul>
<li>系统默认（创建）</li>
<li>用户定义（要求唯一）</li>
</ul>
</li>
<li>为了简化不同版本的数据管理，BigTable提供给了两种设置：<ul>
<li>保留<strong>最近的n个</strong>版本数据</li>
<li>保留<strong>限定时间内</strong>的所有不同版本数据</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="小结——行、列、时间戳"><a href="#小结——行、列、时间戳" class="headerlink" title="小结——行、列、时间戳"></a>小结——行、列、时间戳</h4><h5 id="行"><a href="#行" class="headerlink" title="行"></a>行</h5><ul>
<li>Bigtable的行关键字可以是任意的字符串，但是<strong>大小不能够超过64KB</strong></li>
<li>表中数据都是根据<strong>行关键字</strong>进行排序的，排序使用的是<strong>词典序</strong></li>
<li>同一地址域的网页会被存储在表中的<strong>连续位置</strong></li>
</ul>
<h5 id="列"><a href="#列" class="headerlink" title="列"></a>列</h5><ul>
<li>将其组织成所谓的<strong>列族（Column Family）</strong></li>
<li><strong>族名必须有意义</strong>，限定词则可以任意选定</li>
<li>组织的数据结构清晰明了，含义也很清楚</li>
<li>族同时也是Bigtable中<strong>访问控制（Access Control）的基本单元</strong></li>
</ul>
<h5 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h5><ul>
<li>Google的很多服务比如网页检索和用户的个性化设置等都需要保存不同时间的数据，这些不同的数据版本必须通过时间戳来区分。</li>
<li>Bigtable中的时间戳是64位整型数，具体的赋值方式可以用户自行定义</li>
</ul>
<h5 id="无数据校验"><a href="#无数据校验" class="headerlink" title="无数据校验"></a>无数据校验</h5><ul>
<li><p><strong>每行都可存储任意数目的列</strong></p>
<ul>
<li>BigTable不对列的最少数目进行约束</li>
</ul>
</li>
<li><p><strong>任意类型的数据均可存储</strong></p>
<ul>
<li>BigTable将所有数据均看作为字符串</li>
</ul>
</li>
<li><p><strong>数据的有效性校验由构建于其上的应用系统完成</strong></p>
<p>🐰BigTable不进行数据的有效性校验</p>
</li>
</ul>
<h3 id="系统架构-2"><a href="#系统架构-2" class="headerlink" title="系统架构"></a>系统架构</h3><h4 id="Bigtable的基本架构"><a href="#Bigtable的基本架构" class="headerlink" title="Bigtable的基本架构"></a>Bigtable的基本架构</h4><p><img src="https://cdn.sparkling.land/christy/images/image-20200317005418362.png" alt="image-20200317005418362"></p>
<h4 id="Bigtable中Chubby的主要作用🌿"><a href="#Bigtable中Chubby的主要作用🌿" class="headerlink" title="Bigtable中Chubby的主要作用🌿"></a>Bigtable中Chubby的主要作用🌿</h4><ol>
<li>选取并保证同一时间内只有一个主服务器（Master Server）。</li>
<li>获取子表的位置信息。</li>
<li>保存Bigtable的模式信息及访问控制列表。</li>
</ol>
<p>子表服务器</p>
<h4 id="SSTable格式的基本示意"><a href="#SSTable格式的基本示意" class="headerlink" title="SSTable格式的基本示意"></a>SSTable格式的基本示意</h4><p>*<em>_SSTable_是Google为Bigtable设计的内部数据存储格式。*</em>🌿🌿🌿🌿🌿</p>
<p>所有的SSTable文件都存储在<strong>GFS</strong>上，用户可以通过<strong>键</strong>来查询相应的<strong>值</strong>。</p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317010654774.png" alt="image-20200317010654774"></p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200820004236401.png" alt="image-20200820004236401"></p>
<h4 id="子表实际组成"><a href="#子表实际组成" class="headerlink" title="子表实际组成"></a>子表实际组成</h4><ul>
<li><p>不同子表的SSTable可以共享</p>
</li>
<li><p>每个子表服务器上<strong>仅保存一个日志文件</strong></p>
<blockquote>
<p>🐰共享日志，每个子表服务器上的日志是共享日志的一个片段</p>
</blockquote>
</li>
<li><p>Bigtable规定将日志的内容按照键值进行排序</p>
</li>
<li><p>每个子表服务器上保存的子表数量可以从几十到上千不等，通常情况下是100个左右</p>
</li>
</ul>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317010911551.png" alt="image-20200317010911551"></p>
<h4 id="子表地址组成"><a href="#子表地址组成" class="headerlink" title="子表地址组成"></a>子表地址组成</h4><p>Bigtable系统的内部采用的是一种<strong>类似B+树的三层查询体系</strong></p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317011207410.png" alt="image-20200317011207410"></p>
<blockquote>
<p>🐰元数据表：</p>
<p>根子表（保存其他子表的位置） + 其他元数据子表（保存用户子表的位置信息）</p>
</blockquote>
<h4 id="Bigtable-数据存储及读-写操作"><a href="#Bigtable-数据存储及读-写操作" class="headerlink" title="Bigtable 数据存储及读/写操作"></a>Bigtable 数据存储及读/写操作</h4><p><strong>较新</strong>的数据存储在内存中一个称为<strong>内存表</strong>（Memtable）的有序缓冲里，</p>
<p>较早的数据则以<strong>SSTable格式</strong>保存在GFS中。</p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317011511341.png" alt="image-20200317011511341"></p>
<blockquote>
<p>🐰内存表（SSTable的缓存），达到阈值后冻结，经过次压缩变成SSTable，Bigtable再创建一个新的内存表</p>
</blockquote>
<h4 id="三种形式压缩之间的关系"><a href="#三种形式压缩之间的关系" class="headerlink" title="三种形式压缩之间的关系"></a>三种形式压缩之间的关系</h4><p><img src="https://cdn.sparkling.land/christy/images/image-20200317011847420.png" alt="image-20200317011847420"></p>
<blockquote>
<p>🐰</p>
<p>内存表的空间有限，达到阈值后 —- 次压缩</p>
<p>合并压缩 — 定期进行</p>
<p>主压缩 — 定期进行</p>
<p>主压缩成一个SSTable后，前面被压缩的都会被删除</p>
</blockquote>
<h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><h4 id="局部性群组-Locality-Group"><a href="#局部性群组-Locality-Group" class="headerlink" title="局部性群组(Locality Group)"></a>局部性群组(Locality Group)</h4><p>Bigtable允许用户将原本并不存储在一起的数据以<strong>列族</strong>为单位，根据需要组织在一个单独的SSTable中，以构成一个局部性群组。</p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317012343080.png" alt="image-20200317012343080"></p>
<blockquote>
<p>用户可以只看自己感兴趣的内容。 对于一些较小的且会被经常读取的局部性群组，明显地改善读取效率。</p>
</blockquote>
<h4 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h4><p>压缩可以有效地节省空间，Bigtable中的压缩被应用于很多场合。</p>
<p>压缩可以被用在构成局部性群组的SSTable中，可以选择是否对个人的局部性群组的SSTable进行压缩。</p>
<p><strong>两步压缩</strong></p>
<ol>
<li>利用Bentley &amp; McIlroy方式（<strong>BMDiff</strong>）在大的扫描窗口将<strong>常见的长</strong>串进行压缩</li>
<li>采取Zippy技术进行<strong>快速压缩</strong>，它在一个16KB大小的扫描窗口内寻找重复数据，这个过程非常快</li>
</ol>
<blockquote>
<p>压缩的本质：寻找重复数据，用少的字节代替</p>
</blockquote>
<h4 id="布隆过滤器"><a href="#布隆过滤器" class="headerlink" title="布隆过滤器"></a>布隆过滤器</h4><p>一个很长的<strong>二进制向量</strong>和一系列<strong>随机映射函数</strong></p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>布隆过滤器的速度快，省空间</li>
<li>不会将一个存在的子表判定为不存在</li>
</ul>
<h5 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h5><ul>
<li>在某些情况下它会将不存在的子表判断为存在</li>
</ul>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><h3 id="Google的云计算应用均依赖于四个基础组件"><a href="#Google的云计算应用均依赖于四个基础组件" class="headerlink" title="Google的云计算应用均依赖于四个基础组件"></a>Google的云计算应用均依赖于四个基础组件</h3><ul>
<li>分布式文件存储，GFS</li>
<li>并行数据处理模型MapReduce</li>
<li>分布式锁Chubby</li>
<li>结构化数据表BigTable</li>
</ul>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317013357071.png" alt="image-20200317013357071"></p>
<h3 id="Chubby的作用"><a href="#Chubby的作用" class="headerlink" title="Chubby的作用"></a>Chubby的作用</h3><ul>
<li>为GFS提供锁服务，选择Master节点；记录Master的相关描述信息</li>
<li>通过独占锁记录Chunk Server的活跃情况</li>
<li>为BigTable提供锁服务，记录子表元信息（如子表文件信息、子表分配信息、子表服务器信息）</li>
</ul>
<h3 id="GFS的作用"><a href="#GFS的作用" class="headerlink" title="GFS的作用"></a>GFS的作用</h3><ul>
<li><p>存储BigTable的子表文件</p>
<blockquote>
<p>子表：SSTable和日志文件</p>
</blockquote>
</li>
<li><p>为第三方应用提供大尺寸文件存储功能</p>
</li>
<li><p>文件读操作流程</p>
<ul>
<li>API与Master通信，获取文件元信息</li>
<li>根据指定的读取位置和读取长度，API发起并发操作，分别从若干ChunkServer上读取数据</li>
<li>API组装所得数据，返回结果</li>
</ul>
</li>
</ul>
<h3 id="BigTable的作用"><a href="#BigTable的作用" class="headerlink" title="BigTable的作用"></a>BigTable的作用</h3><ul>
<li><p>为Google云计算应用（或第三方应用）提供数据<strong>结构化</strong>存储功能</p>
<blockquote>
<p>结构化 — 字符串的形式存储</p>
</blockquote>
</li>
<li><p>类似于数据库</p>
<blockquote>
<p>没有事务处理的能力</p>
</blockquote>
</li>
<li><p>为应用提供简单数据查询功能（不支持联合查询）</p>
</li>
<li><p>为MapReduce提供数据源或数据结果存储</p>
</li>
</ul>
<h3 id="MapReduce的作用"><a href="#MapReduce的作用" class="headerlink" title="MapReduce的作用"></a>MapReduce的作用</h3><ul>
<li>对BigTable中的数据进行并行计算处理（如统计、归类等）</li>
<li>使用BigTable或GFS存储计算结果</li>
</ul>
<h2 id="应用场景分析"><a href="#应用场景分析" class="headerlink" title="应用场景分析"></a>应用场景分析</h2><h3 id="应用场景分析1——-Google网站流量分析"><a href="#应用场景分析1——-Google网站流量分析" class="headerlink" title="应用场景分析1—— Google网站流量分析"></a>应用场景分析1—— Google网站流量分析</h3><h4 id="基本功能"><a href="#基本功能" class="headerlink" title="基本功能"></a>基本功能</h4><ul>
<li>统计网站的基本数据，包括会话、综合浏览量、点击量和字节流量等等</li>
<li>分析网站页面关注度，帮助企业调整或增删页面</li>
<li>分析用户浏览路径，优化页面布局</li>
<li>分析用户访问来源链接，提高广告投资回报</li>
</ul>
<h4 id="应用的特征"><a href="#应用的特征" class="headerlink" title="应用的特征"></a>应用的特征</h4><p>海量数据 — 需要存储海量的用户行为数据（如点击时间、位置等） 海量用户 — 需要为任意多的网站提供流量分析</p>
<h4 id="技术路线"><a href="#技术路线" class="headerlink" title="技术路线"></a>技术路线</h4><p>使用BigTable存储和检索数据，使用MapReduce统计数据</p>
<h4 id="BigTable中的表设计"><a href="#BigTable中的表设计" class="headerlink" title="BigTable中的表设计"></a>BigTable中的表设计</h4><p><strong>原始点击数据表</strong></p>
<p>行键：点击时间</p>
<p>列键：网站URL、网站名称、用户IP地址、来源URL、目标URL…… 目前尺寸约200TB</p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317013953369.png" alt="image-20200317013953369"></p>
<p><strong>统计数据表</strong></p>
<p>行键：网站URL<strong>（倒排）</strong></p>
<p>列键：点击次数（如记录最近一个月每日的访问次数等）、页面关注度（如记录网站页面的访问比率）、来源网站（如记录TOP10）、目标网站（如记录TOP10）…</p>
<p>每个列中记录的内容是字符串，Analytics在查询后需要解析字符串获得统计结果</p>
<p>可根据统计内容的增多来增加新的列</p>
<p>目前尺寸约20TB</p>
<h4 id="业务流程分析"><a href="#业务流程分析" class="headerlink" title="业务流程分析"></a>业务流程分析</h4><p><img src="https://cdn.sparkling.land/christy/images/image-20200317014341289.png" alt="image-20200317014341289"></p>
<h4 id="数据采集"><a href="#数据采集" class="headerlink" title="数据采集"></a>数据采集</h4><ul>
<li><p>数据来源</p>
<ul>
<li>页面内嵌脚本</li>
<li>点击行为脚本</li>
</ul>
</li>
<li><p>应用服务器获取到数据后，存入BigTable</p>
</li>
<li><p>数据存储流程</p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317014546388.png" alt="image-20200317014546388"></p>
</li>
</ul>
<h4 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h4><ul>
<li><p>例如，统计网站(如xxx.com)过去一周网页访问比例</p>
</li>
<li><p>数据处理流程</p>
<p><img src="https://cdn.sparkling.land/christy/images/image-20200317014651503.png" alt="image-20200317014651503"></p>
</li>
<li><p>Map操作</p>
<p>假设过去一周查询结果文件在GFS中包含M个Chunk，那么Master寻找M个空闲的Worker，分别处理这M个Chunk，得到每个网站中页面的访问次数</p>
</li>
<li><p>自动排序</p>
<p>对M个中间结果进行排序</p>
</li>
<li><p>Reduce操作</p>
<p>假设含N个网站，那么可以分配N台Worker分别处理单个网站的数据</p>
</li>
<li><p>写入数据</p>
</li>
<li><p>应用程序将分析结果写入统计数据表</p>
</li>
</ul>
<h4 id="数据查询"><a href="#数据查询" class="headerlink" title="数据查询"></a>数据查询</h4><p>从数据统计表中查询xxx.com行 获取对应列的数据，解析，得到并展示最终结果</p>
<h3 id="应用场景分析2——Google搜索"><a href="#应用场景分析2——Google搜索" class="headerlink" title="应用场景分析2——Google搜索"></a>应用场景分析2——Google搜索</h3><h4 id="Google搜索的总体业务流程"><a href="#Google搜索的总体业务流程" class="headerlink" title="Google搜索的总体业务流程"></a>Google搜索的总体业务流程</h4><ol>
<li>数据采集: Spider</li>
<li>数据整理<ul>
<li>生成各类子表，如音乐表、生活搜索表、学术搜索表等</li>
<li>压缩数据表，清洗失效数据</li>
</ul>
</li>
<li>数据检索</li>
</ol>
<h4 id="数据采集-1"><a href="#数据采集-1" class="headerlink" title="数据采集"></a>数据采集</h4><ul>
<li>通过若干Spider在网络上搜集数据</li>
<li>使用BigTable存储数据 行键：倒排的URL 列键：网站名称、语言、HTML描述、图片、链接…… 时间戳：记录不同时刻的网页快照</li>
</ul>
<h4 id="数据整理（Google学术搜索）"><a href="#数据整理（Google学术搜索）" class="headerlink" title="数据整理（Google学术搜索）"></a>数据整理（Google学术搜索）</h4><ul>
<li><p><strong>数据抽取</strong></p>
<ul>
<li>寻找包含学术（论文）信息的网页数据，并结构化存储</li>
<li>学术（论文）信息抽取（分析参考文献、摘要等）</li>
<li>可能的技术方案：MapReduce+BigTable</li>
</ul>
</li>
<li><p><strong>数据统计</strong></p>
<ul>
<li>基于抽取的数据进行统计分析（如分析被引用次数等）</li>
<li>可能的技术方案MapReduce+BigTable</li>
</ul>
</li>
<li><p><strong>学术信息BigTable</strong> 行键：论文标题 列键：作者、主题词、摘要、参考文献、期刊信息、被引用次数、下载链接……</p>
</li>
<li><p><strong>如何获取论文统计数据（如论文引用次数）</strong></p>
<p><strong>步骤</strong></p>
<ul>
<li>分析论文信息表，MapReduce</li>
<li>归纳排序</li>
<li>Reduce操作</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/08/18/03%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A6%82%E8%BF%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Christy">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="一杯西瓜汁er🍉">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/18/03%E5%A4%A7%E6%95%B0%E6%8D%AE%E6%A6%82%E8%BF%B0/" itemprop="url">03大数据概述</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-08-18T08:54:00+00:00">
                2020-08-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>为专业课复习用</p>
</blockquote>
<h2 id="信息科技为大数据时代提供技术支撑"><a href="#信息科技为大数据时代提供技术支撑" class="headerlink" title="信息科技为大数据时代提供技术支撑"></a>信息科技为大数据时代提供技术支撑</h2><ol>
<li>存储设备容量不断增加</li>
<li>CPU处理能力大幅提升</li>
<li>网络带宽不断增加</li>
</ol>
<h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><p>海量数据或巨量数据，其规模巨大到无法通过目前主流的计算机系统在合理时间内获取、存储、管理、处理并提炼以帮助使用者决策。</p>
<h2 id="特点4V"><a href="#特点4V" class="headerlink" title="特点4V"></a>特点4V</h2><ol>
<li>价值密度低（Value）</li>
<li>数据量大（Volume）</li>
<li>快速（Velocity）</li>
<li>多样（Variety）</li>
</ol>
<h2 id="大数据的影响"><a href="#大数据的影响" class="headerlink" title="大数据的影响"></a>大数据的影响</h2><blockquote>
<p>图灵奖获得者、著名数据库专家Jim Gray博士观察并总结人类自古以来，在科学研究上，<strong>先后</strong>历经了<strong>实验、理论、计算和数据</strong>四种范式</p>
</blockquote>
<p>在思维方式方面，大数据完全颠覆了传统的思维方式：</p>
<ul>
<li>全样而非抽样</li>
</ul>
<ul>
<li>效率而非精确</li>
</ul>
<ul>
<li>相关而非因果</li>
</ul>
<h2 id="大数据的关键技术"><a href="#大数据的关键技术" class="headerlink" title="大数据的关键技术"></a>大数据的关键技术</h2><h3 id="两大核心技术"><a href="#两大核心技术" class="headerlink" title="两大核心技术"></a>两大核心技术</h3><ol>
<li>分布式存储<ul>
<li>GFS/HDFS、BigTable等</li>
</ul>
</li>
<li>分布式处理<ul>
<li>MapReduce</li>
</ul>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/">&lt;i class&#x3D;&quot;fa fa-angle-left&quot;&gt;&lt;&#x2F;i&gt;</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.jpg"
                alt="Christy" />
            
              <p class="site-author-name" itemprop="name">Christy</p>
              <p class="site-description motion-element" itemprop="description">保持热情:)</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
                <a href="/archives">
                  <span class="site-state-item-count">24</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/christy99cc" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2020 &mdash; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Christy</span>

  
</div>


  <div class="powered-by">powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> </div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
